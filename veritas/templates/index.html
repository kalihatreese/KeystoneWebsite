<!DOCTYPE html>
<html>
<head>
    <title>Veritas | Keystone AI ML</title>
    <style>
        body { background: #000; color: #0f0; font-family: 'Courier New', Courier, monospace; padding: 20px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .panel { border: 1px solid #0f0; padding: 15px; background: #050505; }
        h2 { color: #fff; border-bottom: 1px solid #0f0; }
        #log { height: 200px; overflow-y: scroll; font-size: 12px; color: #888; }
        input { background: #000; color: #0f0; border: 1px solid #0f0; width: 80%; padding: 10px; }
        button { background: #0f0; color: #000; border: none; padding: 10px 20px; cursor: pointer; }
        .fleet-status { color: #0ff; }
    </style>
</head>
<body>
    <h1>VERITAS GOVERNANCE NODE [ONLINE]</h1>
    <div class="grid">
        <div class="panel">
            <h2>COMMUNICATIONS</h2>
            <div id="response">Waiting for Period Protocol verification...</div>
            <br>
            <input type="text" id="userInput" placeholder="Type message (Must contain a period .)">
            <button onclick="send()">TRANSMIT</button>
        </div>

        <div class="panel">
            <h2>RENTAL FLEET STATUS</h2>
            <div class="fleet-status">
                • [ACTIVE] 12GB Lenovo Node - $149/mo <button onclick="buy()">RENT</button><br>
                • [IDLE] ReeseDroid Mobile Node - $49/mo<br>
                • [PENDING] Node 03 - Waiting for stewardship...
            </div>
        </div>

        <div class="panel" style="grid-column: span 2;">
            <h2>SYSTEM INTEGRITY LOG (CRIME WATCH)</h2>
            <div id="log">Initializing log scan...</div>
        </div>
    </div>

    <script>
        function send() {
            let msg = document.getElementById("userInput").value;
            fetch('/ask', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({message: msg})
            })
            .then(res => res.json())
            .then(data => {
                document.getElementById("response").innerText = data.text;
                if(data.voice) { new Audio('/voice?t=' + Date.now()).play(); }
                updateLog();
            });
        }

        function updateLog() {
            fetch('/logs').then(res => res.text()).then(data => {
                document.getElementById("log").innerText = data;
            });
        }
        setInterval(updateLog, 3000); // Auto-refresh logs
    </script>
</body>
</html>
