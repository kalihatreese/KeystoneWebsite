<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Keystone · Trinity · Veritas</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
<script src="https://unpkg.com/three@0.128.0/examples/js/postprocessing/EffectComposer.js"></script>
<script src="https://unpkg.com/three@0.128.0/examples/js/postprocessing/RenderPass.js"></script>
<script src="https://unpkg.com/three@0.128.0/examples/js/postprocessing/ShaderPass.js"></script>
<script src="https://unpkg.com/three@0.128.0/examples/js/postprocessing/UnrealBloomPass.js"></script>
<script src="https://unpkg.com/three@0.128.0/examples/js/postprocessing/LuminosityHighPassShader.js"></script>
<script src="https://unpkg.com/three@0.128.0/examples/js/postprocessing/OutputPass.js"></script>
<style>
body { margin:0; background: #000; color:#fff; overflow:hidden; font-family: sans-serif; }
#ui-overlay { position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:10; }
.portal-label { position:absolute; padding:8px; background:rgba(0,255,255,0.1); border:1px solid #00FFFF; color:#00FFFF; cursor:pointer; pointer-events:auto; transform:translate(-50%,-50%); font-size:12px; }
</style>
</head>
<body>
<div id="ui-overlay"></div>
<script>
const PRIMARY_COLOR = 0x00FFFF;
let scene, camera, renderer, composer, clock;

function init() {
    scene = new THREE.Scene();
    scene.background = new THREE.Color(0x020205); // Dark blue-black instead of pure black
    
    camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
    camera.position.set(0, 2, 5);

    renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(window.devicePixelRatio);
    document.body.appendChild(renderer.domElement);

    // Lights
    const ambient = new THREE.AmbientLight(0xffffff, 0.4);
    scene.add(ambient);
    const point = new THREE.PointLight(PRIMARY_COLOR, 2, 50);
    point.position.set(0, 5, 2);
    scene.add(point);

    // Objects
    const geo = new THREE.TorusKnotGeometry(1, 0.3, 100, 16);
    const mat = new THREE.MeshStandardMaterial({ color: PRIMARY_COLOR, metalness: 0.7, roughness: 0.2 });
    const mesh = new THREE.Mesh(geo, mat);
    scene.add(mesh);

    const ground = new THREE.Mesh(new THREE.PlaneGeometry(100,100), new THREE.MeshStandardMaterial({color: 0x111111}));
    ground.rotation.x = -Math.PI/2;
    ground.position.y = -2;
    scene.add(ground);

    // Composer (The Bloom effect often causes the black screen if misconfigured)
    composer = new THREE.EffectComposer(renderer);
    composer.addPass(new THREE.RenderPass(scene, camera));
    
    // Test without Bloom first to ensure visibility
    clock = new THREE.Clock();
    animate();
}

function animate() {
    requestAnimationFrame(animate);
    const delta = clock.getDelta();
    const time = clock.getElapsedTime();
    
    scene.children.forEach(child => {
        if(child.isMesh && !child.geometry.type.includes("Plane")) {
            child.rotation.y += 0.01;
            child.position.y = Math.sin(time) * 0.2;
        }
    });

    composer.render();
}

window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
    composer.setSize(window.innerWidth, window.innerHeight);
});

init();
</script>
</body>
</html>
